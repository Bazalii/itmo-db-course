(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{475:function(t,v,s){"use strict";s.r(v);var _=s(65),a=Object(_.a)({},(function(){var t=this,v=t.$createElement,s=t._self._c||v;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_24-проблемы-конкурирующих-транзакции-и-методы-их-решения-уровни-изоляции-транзакции"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_24-проблемы-конкурирующих-транзакции-и-методы-их-решения-уровни-изоляции-транзакции"}},[t._v("#")]),t._v(" 24. Проблемы конкурирующих транзакций и методы их решения. Уровни изоляции транзакций")]),t._v(" "),s("h2",{attrs:{id:"проблемы-конкурирующих-транзакции"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#проблемы-конкурирующих-транзакции"}},[t._v("#")]),t._v(" Проблемы конкурирующих транзакций")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("Проблема потерянного обновления")])]),t._v(" "),s("p",[t._v("Ситуация, когда при одновременном изменении одного блока данных разными транзакциями одно из изменений теряется")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Кладём и списываем деньги со счёта")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Проблема грязного чтения")])]),t._v(" "),s("p",[t._v("Чтение данных, добавленных или изменённых транзакцией, которая впоследствии не подтвердится (откатится)")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Кладём и списываем деньги со счёта, после этого пытаемся отменить пополнение")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Проблема неповторяемого чтения")])]),t._v(" "),s("p",[t._v("Ситуация, когда при повторном чтении в рамках одной транзакции ранее прочитанные данные оказываются изменёнными")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Проблема фантомного чтения")])]),t._v(" "),s("p",[t._v("Ситуация, когда при повторном чтении в рамках одной транзакции одна и та же выборка дает разные множества строк.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Сначала считываем данные, потом добавляем новую запись и на основе считанных данных получаем неверный результат (например, среднее значение в параллельных подзапросах)")])])])]),t._v(" "),s("h2",{attrs:{id:"блокировки"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#блокировки"}},[t._v("#")]),t._v(" Блокировки")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Все транзакции строятся на основе блокировок - блокировки кортежей, атрибутов, таблиц или всей базы данных")])]),t._v(" "),s("h3",{attrs:{id:"классификация-блокировок"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#классификация-блокировок"}},[t._v("#")]),t._v(" Классификация блокировок")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("Явные (накладывающиеся пользователем)")])]),t._v(" "),s("li",[s("p",[t._v("Неявные (накладывающиеся самой СУБД)")])]),t._v(" "),s("li",[s("p",[t._v("Монопольные - блокируются все виды доступа к объектам")])]),t._v(" "),s("li",[s("p",[t._v("Коллективные - блокируется только изменение")])])]),t._v(" "),s("p",[t._v("Дедлоки")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Если одна из транзакций пытается наложить блокировку, пересекающиеся с какой-то другой блокировкой - появление "),s("strong",[t._v("дедлоков")])])]),t._v(" "),s("h2",{attrs:{id:"уровни-изоляции-для-решения-конкурирующих-транзакции"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#уровни-изоляции-для-решения-конкурирующих-транзакции"}},[t._v("#")]),t._v(" Уровни изоляции (для решения конкурирующих транзакций)")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("Незавершённое чтение")])]),t._v(" "),s("p",[t._v("Требует, чтобы изменять данные могла только одна транзакция. Поможет справиться с "),s("strong",[t._v("проблемой потерянного обновления")]),t._v(".")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Завершённое чтение")])]),t._v(" "),s("p",[t._v("Если транзакция начала изменение данных, то никакая другая транзакция не сможет их прочитать до завершения первой. Поможет справитсья с "),s("strong",[t._v("проблемой грязного чтения")]),t._v(".")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Воспроизводимое чтение")])]),t._v(" "),s("p",[t._v("Если транзакция считывает данные, то никакая другая транзакция не сможет их изменить до завершения первой. "),s("em",[t._v("Видимо")]),t._v(", поможет справиться с "),s("strong",[t._v("проблемой неповторяемого чтения")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Сериализуемость")])]),t._v(" "),s("p",[t._v("Если транзакция обращается к данным, то никакая другая транзакция не сможет добавить новые или изменить существующие кортежи в этом объекте данных. "),s("em",[t._v("Видимо")]),t._v(", поможет справиться с "),s("strong",[t._v("проблемой фантомного чтения")])])])]),t._v(" "),s("h2",{attrs:{id:"долговечность"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#долговечность"}},[t._v("#")]),t._v(" Долговечность")]),t._v(" "),s("p",[t._v("Обеспечивается журналируемостью транзакций")])])}),[],!1,null,null,null);v.default=a.exports}}]);